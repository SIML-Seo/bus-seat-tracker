# 슬랙 알림 설정 가이드

이 가이드는 문의 폼 제출 시 슬랙으로 알림을 받는 기능을 설정하는 방법을 안내합니다.

## 1. 슬랙 앱 생성하기

1. [Slack API 웹사이트](https://api.slack.com/apps)에 접속합니다.
2. "Create New App" 버튼을 클릭합니다.
3. "From scratch" 옵션을 선택합니다.
4. 앱 이름(예: "버스잔여석문의알림")을 입력하고 워크스페이스를 선택합니다.
5. "Create App" 버튼을 클릭합니다.

## 2. 웹훅 설정하기

1. 왼쪽 메뉴에서 "Incoming Webhooks"를 선택합니다.
2. 오른쪽 상단 토글을 "On"으로 변경합니다.
3. 페이지 하단의 "Add New Webhook to Workspace" 버튼을 클릭합니다.
4. 알림을 받을 채널을 선택합니다 (예: #general 또는 새 채널을 생성).
5. "Allow" 버튼을 클릭합니다.
6. 웹훅 URL이 생성됩니다 - 이 URL을 복사하세요.

## 3. 환경 변수 설정하기

1. 프로젝트 루트 디렉토리의 `.env` 파일을 엽니다.
2. 다음 환경 변수를 추가합니다:
   ```
   SLACK_WEBHOOK_URL="https://hooks.slack.com/services/TXXXXXX/BXXXXXX/XXXXXXXX"
   ```
   위의 URL을 복사한 웹훅 URL로 교체하세요.

3. 애플리케이션을 재시작합니다.

## 4. 테스트하기

1. 웹사이트의 문의 폼을 사용하여 테스트 메시지를 전송합니다.
2. 설정한 슬랙 채널에 알림이 표시되는지 확인합니다.
3. 알림에는 이름, 이메일, 문의 내용, 접수 시간 등이 포함됩니다.

## 알림 형식 예시

슬랙에 표시되는 알림은 다음과 같은 형식입니다:

```
🔔 새로운 문의가 접수되었습니다
----------------------------------
이름:           이메일:
홍길동          hong@example.com

문의 내용:
버스 시간표가 정확하지 않은 것 같습니다. 확인 부탁드립니다.

접수 ID: a1b2c3d4 | 접수 시간: 2023-09-15 14:30:45
```

## 문제 해결

* 알림이 전송되지 않는 경우, 다음을 확인하세요:
  1. `.env` 파일의 `SLACK_WEBHOOK_URL`이 올바르게 설정되었는지 확인
  2. 애플리케이션 로그에서 오류 메시지 확인
  3. 슬랙 앱이 워크스페이스에 올바르게 설치되었는지 확인

* 알림 형식을 변경하려면 `lib/slack/notifications.ts` 파일을 수정하세요.

## 추가 기능

* 더 다양한 알림 기능이 필요하다면 Slack API의 [Block Kit Builder](https://app.slack.com/block-kit-builder)를 사용해 메시지 형식을 커스터마이징할 수 있습니다.
* 특정 키워드가 있는 문의에 대해 다른 채널로 알림을 보내는 기능도 추가할 수 있습니다. 